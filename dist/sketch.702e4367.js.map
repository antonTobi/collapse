{"version":3,"sources":["sketch.js"],"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","return","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","next","push","Array","isArray","_createForOfIteratorHelper","_n","F","s","_arrayLikeToArray","toString","slice","constructor","name","from","test","_typeof","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","toPrimitive","String","Number","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","initializeApp","auth","db","firestore","currentUser","alphabet","tebahpla","bounceFactor","gravity","S","X","Y","boxColors","Box","x","assign","vy","draw","fill","square","textSize","yFactor","xFactor","text","NumberGrid","h","seed","arguments","undefined","Date","now","moves","gameOver","score","clicks","settled","state","j","boxX","boxY","applyGravityAndRefill","tic","performance","_iterator","_step","k","do","err","box","toc","noLegalMoves","displayScore","targetY","filter","b","removedCount","floor","click","mx","my","_this$i","_this$getCoordinates","getCoordinates","_this$getCoordinates2","scoreGain","removeItem","saveHighScore","storeItem","grid","join","loop","chain","getChain","forEach","getAdjacent","_i6","_arr","_this","_arr$_i","dx","dy","_context","visited","Set","visitedCoords","stack","add","_stack$pop","pop","_stack$pop2","_iterator2","_step2","_step2$value","bi","bj","has","_toConsumableArray","highScore","newGame","_x","_saveHighScore","apply","_asyncToGenerator","_callee","_t","_context2","console","error","collection","userId","uid","timestamp","FieldValue","serverTimestamp","log","setup","createCanvas","textAlign","CENTER","strokeWeight","onAuthStateChanged","user","signInAnonymously","catch","autoSaveSeed","getItem","split","background","over","rect","width","noLoop","mousePressed","mouseY","mouseX","confirm","redraw"],"mappings":"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","file":"sketch.702e4367.js","sourceRoot":"..","sourcesContent":["\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n    apiKey: \"AIzaSyAB8uHkJNm_8OtGGCO2f6g_3k2ehFsCzT0\",\n    authDomain: \"collapse-700c3.firebaseapp.com\",\n    projectId: \"collapse-700c3\",\n    storageBucket: \"collapse-700c3.firebasestorage.app\",\n    messagingSenderId: \"342963844921\",\n    appId: \"1:342963844921:web:e2a44b32bfa71099d39ae8\",\n    measurementId: \"G-W2Q5PLTER8\"\n};\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nconst auth = firebase.auth();\nconst db = firebase.firestore();\n\nlet currentUser = null;\n\nconst alphabet = \"abcdefghijklmnopqrstuvwxyz\";\n\nconst tebahpla = {};\n\nfor (let i = 0; i < 26; i++) {\n    tebahpla[alphabet[i]] = i;\n}\n\nconst bounceFactor = 0.5;\nconst gravity = 1;\n\nconst m = 4294967296;\nconst a = 1664525;\nconst c = 1013904223;\n\nconst S = 80;\nconst X = 0;\nconst Y = 80;\n\nconst boxColors = [\n    \"#555555\",\n    \"#22baac\",\n    \"#ffbe53\",\n    \"#ee6984\",\n    \"#4b6da4\",\n    \"#845584\",\n    \"#555555\",\n];\n\nclass Box {\n    constructor(n, x, y) {\n        Object.assign(this, { n, x, y, vy: 0 });\n    }\n\n    draw() {\n        fill(boxColors[this.n % 10]);\n        square(this.x, this.y, S);\n\n        textSize(0.7 * S);\n\n        let yFactor = 0.55;\n        let xFactor = this.n > 9 ? 0.48 : 0.5;\n        let x = this.x + S * xFactor;\n        let y = this.y + S * yFactor;\n        fill(255);\n        text(this.n, x, y);\n    }\n}\n\nclass NumberGrid {\n    constructor(w, h, seed = Date.now() % m, moves = \"\") {\n        this.w = w;\n        this.h = h;\n        this.gameOver = false;\n        this.score = 0;\n        this.clicks = 0;\n        this.settled = true;\n        this.seed = seed % m;\n        this.state = seed % m;\n        this.moves = [];\n        for (let i = 0; i < this.w; i++) {\n            this[i] = [];\n            for (let j = 0; j < this.h; j++) {\n                const boxX = X + S * i;\n                const boxY = Y + S * (this.h - 1 - j);\n                this[i].push(new Box(0, boxX, boxY));\n            }\n        }\n\n        this.applyGravityAndRefill();\n        if (moves.length) {\n            let tic = performance.now();\n            for (let c of moves) {\n                let k = tebahpla[c];\n                let i = k % 5;\n                let j = (k - i) / 5;\n                this.do(i, j);\n            }\n\n            for (let i = 0; i < this.w; i++) {\n                for (let j = 0; j < this.h; j++) {\n                    let box = this[i][j];\n                    box.y = Y + S * (this.h - 1 - j);\n                    box.vy = 0;\n                }\n            }\n\n            let toc = performance.now();\n\n            // console.log(`Replayed ${moves.length} moves in ${toc - tic} ms`);\n            this.gameOver = this.noLegalMoves()\n        }\n\n        this.displayScore = this.score;\n    }\n\n\n    draw() {\n        this.settled = true;\n        for (let i = 0; i < this.w; i++) {\n            for (let j = 0; j < this.h; j++) {\n                const box = this[i][j];\n                const targetY = Y + S * (this.h - 1 - j);\n                if (box.y < targetY || box.vy !== 0) {\n                    this.settled = false;\n                    box.vy += gravity;\n                    box.y += box.vy;\n                    if (box.y >= targetY && box.vy > 0) {\n                        box.y = targetY;\n                        if (box.vy > 1) {\n                            box.vy *= -bounceFactor;\n                        } else {\n                            box.vy = 0;\n                        }\n                    }\n                }\n\n                box.draw();\n            }\n        }\n    }\n\n    applyGravityAndRefill() {\n        for (let i = 0; i < this.w; i++) {\n            this[i] = this[i].filter((b) => b.n !== 0);\n            let removedCount = this.h - this[i].length;\n            for (let k = 0; k < removedCount; k++) {\n                const boxX = X + S * i;\n                const boxY = Y - S * (k + 1);\n                this.state = (this.state * a + c) % m;\n                let n = floor((4 * this.state) / m) + 1;\n                this[i].push(new Box(n, boxX, boxY));\n            }\n        }\n    }\n\n    click(mx, my) {\n        let [i, j] = this.getCoordinates(mx, my);\n        if (!this?.[i]?.[j]) return;\n        let scoreGain = this.do(i, j);\n        if (scoreGain) {\n            if (this.noLegalMoves()) {\n                this.gameOver = true;\n                removeItem(\"autoSaveSeed\");\n                removeItem(\"autoSaveMoves\");\n                saveHighScore(this.score);\n            } else {\n                storeItem(\"autoSaveMoves\", grid.moves.join(\"\"));\n            }\n            loop();\n        }\n    }\n\n    do(i, j) {\n        let n = this[i][j].n;\n        if (n > 5) return 0;\n        let chain = this.getChain(i, j);\n        if (chain.length < 2) return 0;\n        this.moves.push(alphabet[5 * j + i]);\n        let scoreGain = n * chain.length;\n        this.score += scoreGain;\n\n        this.clicks += 1;\n\n        chain.forEach(b => b.n = 0)\n\n        this[i][j].n = n + 1;\n        this.applyGravityAndRefill();\n        return scoreGain;\n    }\n\n    getCoordinates(mx, my) {\n        let i = floor((mx - X) / S);\n        let j = floor((my - Y) / S);\n        return [i, this.h - 1 - j];\n    }\n\n    *getAdjacent(i, j) {\n        for (let [dx, dy] of [\n            [1, 0],\n            [-1, 0],\n            [0, 1],\n            [0, -1],\n        ]) {\n            let b = this?.[i + dx]?.[j + dy];\n            if (b) {\n                yield [b, i + dx, j + dy];\n            }\n        }\n    }\n\n    getChain(i, j) {\n        let visited = new Set();\n        let visitedCoords = []\n        let stack = [];\n        stack.push([i, j]);\n        visited.add(this[i][j]);\n        visitedCoords.push([i, j])\n        let n = this[i][j].n;\n        while (stack.length) {\n            [i, j] = stack.pop();\n            for (let [b, bi, bj] of this.getAdjacent(i, j)) {\n                if (b.n == n && !visited.has(b)) {\n                    stack.push([bi, bj]);\n                    visited.add(b);\n                    visitedCoords.push([bi, bj])\n                }\n            }\n        }\n        return [...visited]\n    }\n\n    noLegalMoves() {\n        for (let i = 0; i < this.w; i++) {\n            for (let j = 0; j < this.h; j++) {\n                if (this[i][j].n < 6 && this.getChain(i, j).length > 1) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n}\n\nlet grid;\n\nlet highScore;\n\nlet w = 5;\nlet h = 5;\n\nfunction newGame() {\n    grid = new NumberGrid(w, h);\n    storeItem(\"autoSaveSeed\", grid.seed);\n    removeItem(\"autoSaveMoves\");\n}\n\nasync function saveHighScore(score) {\n    if (!currentUser) {\n        console.error(\"Cannot save score: user not signed in\");\n        return;\n    }\n\n    try {\n        await db.collection('scores').add({\n            userId: currentUser.uid,\n            score: score,\n            timestamp: firebase.firestore.FieldValue.serverTimestamp()\n        });\n        console.log(\"Score saved successfully:\", score);\n    } catch (error) {\n        console.error(\"Error saving score:\", error);\n    }\n}\n\nfunction setup() {\n    createCanvas(w * S, h * S + S);\n    textAlign(CENTER, CENTER);\n    strokeWeight(2);\n\n    auth.onAuthStateChanged(user => {\n        if (user) {\n            // User is signed in.\n            currentUser = user;\n            console.log(\"User signed in anonymously:\", currentUser.uid);\n        } else {\n            // User is signed out.\n            currentUser = null;\n            auth.signInAnonymously().catch(error => {\n                console.error(\"Anonymous sign-in failed:\", error);\n            });\n        }\n    });\n\n    let autoSaveSeed = getItem(\"autoSaveSeed\");\n    if (autoSaveSeed !== null) {\n        let moves = getItem(\"autoSaveMoves\") || \"\";\n        grid = new NumberGrid(\n            w,\n            h,\n            autoSaveSeed,\n            moves.split(\"\")\n        );\n    } else {\n        newGame();\n    }\n}\n\nfunction draw() {\n    background(220);\n    grid.draw();\n    let over = grid.gameOver && grid.settled;\n    fill(over ? \"black\" : \"white\");\n    rect(0, 0, width, 80);\n    fill(over ? \"white\" : \"black\");\n    if (grid.displayScore < grid.score) {\n        grid.displayScore++;\n    }\n\n    textSize(36);\n    text(grid.displayScore, width / 2, 42);\n\n    text(\"â†º\", width - S / 2, 42);\n\n\n    //   fill(200);\n    //   textSize(15);\n    //   text(frameCount, 20, 10);\n\n    if (grid.settled && grid.displayScore == grid.score)\n        noLoop();\n\n}\n\nfunction mousePressed() {\n    if (mouseY < 80) {\n        if (mouseX > width - 80) {\n            if (grid.gameOver || grid.score < 1000 || confirm(\"Start a new game?\")) {\n                newGame();\n                loop();\n            }\n        }\n    } else {\n        grid.click(mouseX, mouseY);\n    }\n    redraw();\n}\n\n"]}